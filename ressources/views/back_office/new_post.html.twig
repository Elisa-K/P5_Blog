{% extends 'back_office/layout.html.twig' %}

{% block title %}
  EK - Nouvel article
{% endblock %}
{% block stylesheets %}
	<script src="/vendor/tinymce/tinymce/tinymce.min.js" referrerpolicy="origin"></script>
{% endblock %}
{% block content %}
	<div class="row page-titles">
		<div class="col-md-12 align-self-center">
				<h3 class="text-themecolor text-center">Ajouter un nouvel article</h3>				
		</div>		
	</div>
	<div class="row">
		<div class="col-lg-12 col-xlg-9 col-md-12 mx-auto">
		{% if message is defined %}
			<div class="alert alert-danger" role="alert">
  			{{ message }}				
			</div>
		{% endif %}
			<div class="card">
				<div class="card-body">
					<form action="/dashboard/newpost/addpost" method="post" e,ctype="multipart/form" enctype="multipart/form-data" class="form-horizontal form-material mx-2">
						<div class="form-group">
							<label for="title" class="col-md-12">Titre</label>
							<div class="col-md-12">
								<input type="text" name="title" {% if title is defined %} value="{{ title | raw }}" {% endif %}class="form-control form-control-line" maxlength="255" minlength="2" required>
							</div>
						</div>
						<div class="form-group">
              <label class="col-md-12" for="excerpt">Chapô</label>
							<div class="col-md-12">
								<textarea name="excerpt" rows="5" class="form-control form-control-line" required>{% if excerpt is defined %}{{ excerpt | raw }}{% endif %}</textarea>
							</div>
            </div>
						<div class="form-group">
							<label class="col-md-12" for="featured-img">Image à la une</label>
							<input name="featured-img" type="file" class="form-control form-control-line" accept="image/png, image/jpeg" required>
						</div>
						<div class="form-group">
              <label class="col-md-12" for="excerpt">Contenu</label>
							<div class="error alert alert-danger mb-2" role="alert"></div>
							<div class="col-md-12">
								<textarea id="content-tiny" name="content" class='tinymce'></textarea>
							</div>							
            </div>
						<div class="form-group">
              <div class="col-sm-12">
                <button class="btn btn-themecolor pull-right" id="submit">Publier</button>
              </div>
            </div>
					</form>
				</div>
			</div>
		</div>
	</div>

{% endblock %}

{% block javascripts %}
	<script src="/public/assets/back-office/js/formPost.js"></script>
	{% if content is defined %}
		<script>
		setTimeout(() => {tinymce.get('content-tiny').setContent('{{ content | raw }}')},200);
			
		</script>
	{% endif %}
{% endblock %}